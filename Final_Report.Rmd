---
title: "NHIS 2021: Education, Health, and Well-Being"
author: "Group 3"
date: "`r Sys.Date()`"
output:
  pdf_document: default
  html_document:
    toc: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE
)

library(tidyverse)
library(psych)
theme_set(theme_minimal())
```

# Introduction

The National Health Interview Survey (NHIS) is a large, nationally representative survey
of the U.S. population. In this project, we examine how demographic characteristics,
body measurements, general health, and life satisfaction relate to one another. Our
analysis uses the 2021 NHIS Sample Adult File and focuses on age (AGEP_A), sex (SEX_A),
education (EDUCP_A), height (HEIGHTTC_A), weight (WEIGHTLBTC_A), general health
(PHSTAT_A), and life satisfaction (LSATIS4R_A).

# Methods

We used the cleaned dataset created earlier in our project and saved as
`data/nhis_clean.csv`. After importing the dataset, we converted several variables to
factors with meaningful labels and produced descriptive statistics, univariate plots,
bivariate comparisons, and multivariate visualizations. Height–weight trends and
correlations among age, height, and weight were examined using both ggplot2 and
psych’s `pairs.panels()` function.

```{r data-import}
nhis <- readr::read_csv("data/nhis_clean.csv")

nhis <- nhis %>%
  mutate(
    SEX_A = factor(SEX_A, levels = c(1, 2),
                   labels = c("Male", "Female")),
    EDUCP_A = factor(EDUCP_A, levels = c(1, 2, 3, 4),
                     labels = c("Less than HS",
                                "HS graduate",
                                "Some college",
                                "College graduate+")),
    PHSTAT_A = factor(PHSTAT_A, levels = c(1, 2, 3, 4, 5),
                      labels = c("Excellent", "Very good", "Good", "Fair", "Poor")),
    LSATIS4R_A = factor(LSATIS4R_A, levels = c(1, 2, 3, 4),
                        labels = c("Very satisfied", "Satisfied", "Dissatisfied",
                                   "Very dissatisfied"))
  )

glimpse(nhis)
```

# Results

## Descriptive statistics

```{r descriptives}
nhis %>%
  select(AGEP_A, HEIGHTTC_A, WEIGHTLBTC_A) %>%
  summary()
```

### Age distribution

```{r age-hist, fig.cap="Figure 1. Distribution of age in the sample."}
ggplot(nhis, aes(x = AGEP_A)) +
  geom_histogram(bins = 30) +
  labs(x = "Age (years)", y = "Count")
```

**Interpretation:**  
The sample contains adults across a wide age range, with a concentration in middle-aged groups.

---

## Education and health

```{r educ-bar, fig.cap="Figure 2. Education categories in the dataset."}
nhis %>%
  count(EDUCP_A) %>%
  ggplot(aes(x = EDUCP_A, y = n)) +
  geom_col() +
  labs(x = "Education level", y = "Count")
```

**Interpretation:**  
Most respondents have at least a high school diploma, with many reporting some college or a college degree.

---

### General health × Life satisfaction

```{r health-life-bar, fig.cap="Figure 3. Health status by life satisfaction."}
nhis %>%
  count(PHSTAT_A, LSATIS4R_A) %>%
  ggplot(aes(x = PHSTAT_A, y = n, fill = LSATIS4R_A)) +
  geom_col(position = "dodge") +
  labs(x = "General health", y = "Count", fill = "Life satisfaction")
```

**Interpretation:**  
Respondents with better general health tend to report higher life satisfaction.

---

## Height & Weight Relationships

```{r height-weight, fig.cap="Figure 4. Scatterplot of height vs. weight."}
ggplot(nhis, aes(x = HEIGHTTC_A, y = WEIGHTLBTC_A)) +
  geom_point(alpha = .5) +
  labs(x = "Height (inches)", y = "Weight (lbs)")
```

```{r height-weight-cor}
cor(nhis$HEIGHTTC_A, nhis$WEIGHTLBTC_A, use = "complete.obs")
```

**Interpretation:**  
Height and weight show a strong positive correlation, consistent with expected body-size patterns.

---

# Multivariate Analysis

### Height, weight, sex, and education

```{r multi-scatter, fig.cap="Figure 5. Weight vs. height by sex and education."}
ggplot(nhis, aes(x = HEIGHTTC_A, y = WEIGHTLBTC_A, color = SEX_A)) +
  geom_point(alpha = .5) +
  facet_wrap(~ EDUCP_A) +
  labs(x = "Height (inches)", y = "Weight (lbs)", color = "Sex")
```

**Interpretation:**  
The height–weight trend is consistent across sexes and education groups, though men tend to weigh more at comparable heights.

---

### Correlation matrix

```{r pairs-panels, fig.cap="Figure 6. Correlation matrix."}
nhis %>%
  select(AGEP_A, HEIGHTTC_A, WEIGHTLBTC_A) %>%
  pairs.panels(method = "pearson",
               hist.col = "gray",
               density = TRUE,
               ellipses = FALSE)
```

**Interpretation:**  
Height and weight have the strongest correlation; age has weaker associations but contributes to variation in weight.

# Discussion

Our analysis of the 2021 NHIS dataset reveals several clear patterns. Self-rated health is strongly associated with life satisfaction, and the expected positive relationship between height and weight appears in all subgroups. Education shows meaningful differences in age distribution and may relate to health patterns indirectly. Because NHIS is cross-sectional, causal direction cannot be determined.

# Conclusion

Overall, the results suggest that demographic factors, education, health status, and well-being are interconnected. Better general health aligns with higher life satisfaction, height and weight show predictable correlations, and education does not drastically change body-size relationships. These findings highlight the value of descriptive and multivariate approaches when analyzing public health survey data.
